<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<body class="bg-gray-100">

    <main class="mx-auto container">
    
    </main>



    <script>
        const container = document.querySelector('.container');
        let posts = [];
        if (localStorage['posts']) {
            posts = JSON.parse(localStorage['posts']);
        }

        posts.forEach(el => {
            container.insertAdjacentHTML("afterbegin", `
                <div class="post rounded-xl bg-white shadow-lg  my-4">
                    <div class="post__header w-full justify-between px-5 py-3 items-center flex" >
                        <h1 class="font-bold text-xl">
                            ${el.title}
                     </h1>
                        <p class="text-gray-300">
                            ${el.created.split('T')[0]}
                        </p>
                    </div>
                    <div class="postBody px-5 py-3">
                        <p>${el.body.slice(0, 219)}...</p>
                    </div>
                    <input value=${el.id} hidden>
                </div>
            `)
        });

        document.addEventListener('click', e => {
            if(e.target.classList.contains('post__header')){
                let currentPostId = e.target.nextElementSibling.nextElementSibling.value;
                console.log(currentPostId)
                currentPost = posts.find(el => el.id === currentPostId)
                localStorage.setItem('currentPost', JSON.stringify(currentPost));
                location.href = "http://127.0.0.1:5500/readPost.html"
            } else {
                console.log('bla')
            }
        })
    </script>
</body>
</html>